<?xml version="1.0" encoding="UTF-8"?>
<Schema xmlns:UserShape="http://ex.example/#UserShape" xmlns:ex="http://ex.example/#" xsi:schemaLocation="http://www.w3.org/shex/ ../xsd/ShEx.xsd" exclude-prefixes="xsi shex" xmlns:rdfs="http://www.w3.org/2000/01/rdf-schem#" xmlns:foaf="http://xmlns.com/foaf/" xmlns:xsd="http://www.w3.org/2001/XMLSchema#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" start="http://ex.example/IssueShape" xmlns="http://www.w3.org/shex/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" default-namespace="http://ex.example/#">
    <startActions>
        <action>
            <codeDecl iri="ex:foo"> initializer for ignored extension </codeDecl>
        </action>
    </startActions>
    <shape label="http://ex.example/IssueShape">
        <group>
            <group min="0">
                <tripleConstraint predicate="ex:reproducedBy" objectType="NONLITERAL" objectShape=":EmployeeShape"/>
                <tripleConstraint predicate="ex:reproducedOn" datatype="xsd:dateTime"/>
                <actions>
                    <action>
                        <codeDecl iri="ex:foo"> asdfasdf </codeDecl>
                    </action>
                </actions>
            </group>
                <tripleConstraint predicate="http://www.w3.org/1999/02/22-rdf-syntax-ns#type" min="0" object="ex:Issue"/>
                <tripleConstraint predicate="ex:state">
                    <objectConstraint>
                        <valueSet>
                            <iriRange base="ex:state" stem="true">
                                <exclusion base="ex:state_resolved"/>
                            </iriRange>
                        </valueSet>
                    </objectConstraint>
                    <annotation iri="rdfs:label">
                        <literal>State</literal>
                    </annotation>
                    <annotation iri="rdfs:description">
                        <literal>the sit</literal>
                    </annotation>
                </tripleConstraint>
                    <tripleConstraint predicate="ex:reportedBy" objectType="IRI" objectShape="UserShape"/>
                    <tripleConstraint predicate="ex:reportedOn" datatype="xsd:dateTime"/>
                    <tripleConstraint predicate="ex:related" objectShape="http://ex.example/IssueShape" min="0" max="unbounded"/>
                </group>
            </shape>
            <shape label="UserShape:">
                <group>
                    <someOf>
                        <group>
                            <tripleConstraint predicate="foaf:givenName" datatype="xsd:string" max="unbounded"/>
                            <tripleConstraint predicate="foaf:familyName" datatype="xsd:string"/>
                        </group>
                            <tripleConstraint predicate="foaf:name" datatype="xsd:string"/>
                        </someOf>
                        <tripleConstraint predicate="foaf:mbox" objectType="IRI">
                            <objectConstraint>
                                <facet>
                                    <pattern>^mailto:</pattern>
                                </facet>
                            </objectConstraint>
                        </tripleConstraint>
                            <tripleConstraint predicate="ex:id" objectType="BNODE" objectShape="_:IDshape"/>
                        </group>
                    </shape>
                    <shape label=":EmployeeShape">
                        <group>
                            <tripleConstraint predicate="foaf:givenName" datatype="xsd:string" max="unbounded"/>
                            <tripleConstraint predicate="foaf:familyName" datatype="xsd:string"/>
                            <tripleConstraint predicate="foaf:phone" objectType="IRI" min="0" max="unbounded"/>
                            <tripleConstraint predicate="foaf:mbox" objectType="IRI" min="0"/>
                        </group>
                    </shape>
                    <shape label="_:IDshape" virtual="true">
                        <someOf>
                            <group>
                                <tripleConstraint predicate="ex:code" objectType="LITERAL"/>
                                <tripleConstraint predicate="ex:system" objectType="IRI"/>
                                <tripleConstraint predicate="ex:literal" min="2" max="3">
                                    <objectConstraint>
                                        <valueSet>
                                            <rdfLiteral>a</rdfLiteral>
                                            <rdfLiteral datatype="ex:c">b</rdfLiteral>
                                            <rdfLiteral langtag="en">c</rdfLiteral>
                                            <rdfLiteral langtag="en-fr">d</rdfLiteral>
                                        </valueSet>
                                    </objectConstraint>
                                </tripleConstraint>
                                <tripleConstraint predicate="ex:misc" objectType="BNODE" negated="true">
                                    <actions>
                                        <action>
                                            <codeDecl iri="ex:foo"> ignored </codeDecl>
                                        </action>
                                        <action>
                                            <codeDecl iri="ex:bar"> also ignored </codeDecl>
                                        </action>
                                    </actions>
                                </tripleConstraint>
                            </group>
                            <group>
                                <group>
                                    <tripleConstraint predicate="ex:ref">
                                        <subjectConstraint>
                                            <valueSet>
                                                <boolean>true</boolean>
                                                <boolean>false</boolean>
                                            </valueSet>
                                        </subjectConstraint>
                                    </tripleConstraint>
                                        <tripleConstraint inverse="true" predicate="ex:miscRef" negated="true"/>
                                    </group>
                                        <tripleConstraint predicate="ex:issues" objectShape="ex:IssueShape" min="0" max="unbounded"/>
                                        <tripleConstraint predicate="ex:seeAlso" objectShape="ex:IssueShape" min="0" max="unbounded"/>
                                        <tripleConstraint predicate="ex:says" objectShape=":EmployeeShape" min="0" max="unbounded"/>
                                    </group>
                                </someOf>
                            </shape>
                            <shape label="ex:FooID" closed="true">
                                <import ref="_:IDshape"/>
                                <extra ref="ex:code"/>
                                <extra ref="ex:system"/>
                            </shape>
                        </Schema>