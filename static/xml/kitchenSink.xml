<?xml version="1.0" encoding="UTF-8"?>
<Schema xmlns="http://www.w3.org/shex/" xmlns:rdfs="http://www.w3.org/2000/01/rdf-schem#" default-namespace="http://ex.example/#" exclude-prefixes="xsi shex" xmlns:UserShape="http://ex.example/#UserShape" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ex="http://ex.example/#" xsi:schemaLocation="http://www.w3.org/shex/ ../xsd/ShEx.xsd" start="http://ex.example/IssueShape" xmlns:xsd="http://www.w3.org/2001/XMLSchema#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:foaf="http://xmlns.com/foaf/">
    <startActions>
        <action>
            <codeDecl iri="ex:foo"> initializer for ignored extension </codeDecl>
        </action>
    </startActions>
    <shape label="http://ex.example/IssueShape">
        <group>
            <group min="0">
                <tripleConstraint predicate="ex:reproducedBy" objectType="NONLITERAL" objectShape=":EmployeeShape"/>
                <tripleConstraint datatype="xsd:dateTime" predicate="ex:reproducedOn"/>
                <actions>
                    <action>
                        <codeDecl iri="ex:foo"> asdfasdf </codeDecl>
                    </action>
                </actions>
            </group>
                <tripleConstraint predicate="http://www.w3.org/1999/02/22-rdf-syntax-ns#type" object="ex:Issue" min="0"/>
                <tripleConstraint predicate="ex:state">
                    <objectConstraint>
                        <valueSet>
                            <iriRange stem="true" base="ex:state">
                                <exclusion base="ex:state_resolved"/>
                            </iriRange>
                        </valueSet>
                    </objectConstraint>
                    <annotation iri="rdfs:label">
                        <literal>State</literal>
                    </annotation>
                    <annotation iri="rdfs:description">
                        <literal>the sit</literal>
                    </annotation>
                </tripleConstraint>
                    <tripleConstraint predicate="ex:reportedBy" objectType="IRI" objectShape="UserShape"/>
                    <tripleConstraint datatype="xsd:dateTime" predicate="ex:reportedOn"/>
                    <tripleConstraint predicate="ex:related" objectShape="http://ex.example/IssueShape" max="unbounded" min="0"/>
                </group>
            </shape>
            <shape label="UserShape:">
                <group>
                    <someOf>
                        <group>
                            <tripleConstraint datatype="xsd:string" max="unbounded" predicate="foaf:givenName"/>
                            <tripleConstraint datatype="xsd:string" predicate="foaf:familyName"/>
                        </group>
                            <tripleConstraint datatype="xsd:string" predicate="foaf:name"/>
                        </someOf>
                        <tripleConstraint objectType="IRI" predicate="foaf:mbox">
                            <objectConstraint>
                                <facet>
                                    <pattern>^mailto:</pattern>
                                </facet>
                            </objectConstraint>
                        </tripleConstraint>
                            <tripleConstraint predicate="ex:id" objectType="BNODE" objectShape="_:IDshape"/>
                        </group>
                    </shape>
                    <shape label=":EmployeeShape">
                        <group>
                            <tripleConstraint datatype="xsd:string" max="unbounded" predicate="foaf:givenName"/>
                            <tripleConstraint datatype="xsd:string" predicate="foaf:familyName"/>
                            <tripleConstraint objectType="IRI" predicate="foaf:phone" max="unbounded" min="0"/>
                            <tripleConstraint predicate="foaf:mbox" objectType="IRI" min="0"/>
                        </group>
                    </shape>
                    <shape label="_:IDshape" virtual="true">
                        <someOf>
                            <group>
                                <tripleConstraint objectType="LITERAL" predicate="ex:code"/>
                                <tripleConstraint objectType="IRI" predicate="ex:system"/>
                                <tripleConstraint predicate="ex:literal" max="3" min="2">
                                    <objectConstraint>
                                        <valueSet>
                                            <rdfLiteral>a</rdfLiteral>
                                            <rdfLiteral datatype="ex:c">b</rdfLiteral>
                                            <rdfLiteral langtag="en">c</rdfLiteral>
                                            <rdfLiteral langtag="en-fr">d</rdfLiteral>
                                        </valueSet>
                                    </objectConstraint>
                                </tripleConstraint>
                                <tripleConstraint objectType="BNODE" negated="true" predicate="ex:misc">
                                    <actions>
                                        <action>
                                            <codeDecl iri="ex:foo"> ignored </codeDecl>
                                        </action>
                                        <action>
                                            <codeDecl iri="ex:bar"> also ignored </codeDecl>
                                        </action>
                                    </actions>
                                </tripleConstraint>
                            </group>
                            <group>
                                <group>
                                    <tripleConstraint predicate="ex:ref">
                                        <subjectConstraint>
                                            <valueSet>
                                                <boolean>true</boolean>
                                                <boolean>false</boolean>
                                            </valueSet>
                                        </subjectConstraint>
                                    </tripleConstraint>
                                        <tripleConstraint inverse="true" negated="true" predicate="ex:miscRef"/>
                                    </group>
                                        <tripleConstraint predicate="ex:issues" objectShape="ex:IssueShape" max="unbounded" min="0"/>
                                        <tripleConstraint predicate="ex:seeAlso" objectShape="ex:IssueShape" max="unbounded" min="0"/>
                                        <tripleConstraint predicate="ex:says" objectShape=":EmployeeShape" max="unbounded" min="0"/>
                                    </group>
                                </someOf>
                            </shape>
                            <shape closed="true" label="ex:FooID">
                                <import ref="_:IDshape"/>
                                <extra ref="ex:code"/>
                                <extra ref="ex:system"/>
                            </shape>
                        </Schema>