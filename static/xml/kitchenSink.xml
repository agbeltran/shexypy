<?xml version="1.0" encoding="UTF-8"?>
<Schema default-namespace="http://ex.example/#" xmlns:ex="http://ex.example/#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:foaf="http://xmlns.com/foaf/" start="http://ex.example/IssueShape" xmlns:xsd="http://www.w3.org/2001/XMLSchema#" xmlns:UserShape="http://ex.example/#UserShape" xmlns="http://www.w3.org/shex/" xmlns:rdfs="http://www.w3.org/2000/01/rdf-schem#" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.w3.org/shex/ ../xsd/ShEx.xsd" exclude-prefixes="xsi shex">
    <startActions>
        <action>
            <codeDecl iri="ex:foo"> initializer for ignored extension </codeDecl>
        </action>
    </startActions>
    <shape label="http://ex.example/IssueShape">
        <group>
            <group min="0">
                <tripleConstraint objectShape=":EmployeeShape" predicate="ex:reproducedBy" objectType="NONLITERAL"/>
                <tripleConstraint datatype="xsd:dateTime" predicate="ex:reproducedOn"/>
                <actions>
                    <action>
                        <codeDecl iri="ex:foo"> asdfasdf </codeDecl>
                    </action>
                </actions>
            </group>
                <tripleConstraint min="0" predicate="http://www.w3.org/1999/02/22-rdf-syntax-ns#type" object="ex:Issue"/>
                <tripleConstraint predicate="ex:state">
                    <objectConstraint>
                        <valueSet>
                            <iriRange base="ex:state" stem="true">
                                <exclusion base="ex:state_resolved"/>
                            </iriRange>
                        </valueSet>
                    </objectConstraint>
                    <annotation iri="rdfs:label">
                        <literal>State</literal>
                    </annotation>
                    <annotation iri="rdfs:description">
                        <literal>the sit</literal>
                    </annotation>
                </tripleConstraint>
                    <tripleConstraint objectShape="UserShape" predicate="ex:reportedBy" objectType="IRI"/>
                    <tripleConstraint datatype="xsd:dateTime" predicate="ex:reportedOn"/>
                    <tripleConstraint max="unbounded" min="0" objectShape="http://ex.example/IssueShape" predicate="ex:related"/>
                </group>
            </shape>
            <shape label="UserShape:">
                <group>
                    <someOf>
                        <group>
                            <tripleConstraint max="unbounded" datatype="xsd:string" predicate="foaf:givenName"/>
                            <tripleConstraint datatype="xsd:string" predicate="foaf:familyName"/>
                        </group>
                            <tripleConstraint datatype="xsd:string" predicate="foaf:name"/>
                        </someOf>
                        <tripleConstraint predicate="foaf:mbox" objectType="IRI">
                            <objectConstraint>
                                <facet>
                                    <pattern>^mailto:</pattern>
                                </facet>
                            </objectConstraint>
                        </tripleConstraint>
                            <tripleConstraint objectShape="_:IDshape" predicate="ex:id" objectType="BNODE"/>
                        </group>
                    </shape>
                    <shape label=":EmployeeShape">
                        <group>
                            <tripleConstraint max="unbounded" datatype="xsd:string" predicate="foaf:givenName"/>
                            <tripleConstraint datatype="xsd:string" predicate="foaf:familyName"/>
                            <tripleConstraint max="unbounded" min="0" predicate="foaf:phone" objectType="IRI"/>
                            <tripleConstraint min="0" predicate="foaf:mbox" objectType="IRI"/>
                        </group>
                    </shape>
                    <shape virtual="true" label="_:IDshape">
                        <someOf>
                            <group>
                                <tripleConstraint predicate="ex:code" objectType="LITERAL"/>
                                <tripleConstraint predicate="ex:system" objectType="IRI"/>
                                <tripleConstraint max="3" min="2" predicate="ex:literal">
                                    <objectConstraint>
                                        <valueSet>
                                            <rdfLiteral>a</rdfLiteral>
                                            <rdfLiteral datatype="ex:c">b</rdfLiteral>
                                            <rdfLiteral langtag="en">c</rdfLiteral>
                                            <rdfLiteral langtag="en-fr">d</rdfLiteral>
                                        </valueSet>
                                    </objectConstraint>
                                </tripleConstraint>
                                <tripleConstraint negated="true" predicate="ex:misc" objectType="BNODE">
                                    <actions>
                                        <action>
                                            <codeDecl iri="ex:foo"> ignored </codeDecl>
                                        </action>
                                        <action>
                                            <codeDecl iri="ex:bar"> also ignored </codeDecl>
                                        </action>
                                    </actions>
                                </tripleConstraint>
                            </group>
                            <group>
                                <group>
                                    <tripleConstraint predicate="ex:ref">
                                        <subjectConstraint>
                                            <valueSet>
                                                <boolean>true</boolean>
                                                <boolean>false</boolean>
                                            </valueSet>
                                        </subjectConstraint>
                                    </tripleConstraint>
                                        <tripleConstraint negated="true" inverse="true" predicate="ex:miscRef"/>
                                    </group>
                                        <tripleConstraint max="unbounded" min="0" objectShape="ex:IssueShape" predicate="ex:issues"/>
                                        <tripleConstraint max="unbounded" min="0" objectShape="ex:IssueShape" predicate="ex:seeAlso"/>
                                        <tripleConstraint max="unbounded" min="0" objectShape=":EmployeeShape" predicate="ex:says"/>
                                    </group>
                                </someOf>
                            </shape>
                            <shape closed="true" label="ex:FooID">
                                <import ref="_:IDshape"/>
                                <extra ref="ex:code"/>
                                <extra ref="ex:system"/>
                            </shape>
                        </Schema>